
# Configuration file for vegetation-focused ST-Cube segmentation
# This file contains the most commonly configured parameters for the NDVI clustering algorithm
# Additional parameters with defaults are available in config_loader.py

# ==============================================================================
# CORE SEGMENTATION PARAMETERS
# ==============================================================================
segmentation:
  # Core algorithm parameters
  min_cluster_size: 8                    # Minimum pixels per vegetation cluster
  max_spatial_distance: 100               # Maximum pixel distance for spatial clustering (pixels)
  min_vegetation_ndvi: 0.2             # Minimum NDVI threshold to consider pixels as vegetation (0-1)
  ndvi_variance_threshold: 0.003        # Minimum NDVI temporal variance to include pixels (0-1)
  ndvi_trend_filter:              # Filter for NDVI trends ('greening', 'browning', or null for both separately)

# ==============================================================================
# CLUSTERING ALGORITHM PARAMETERS
# ==============================================================================
clustering:
  # DBSCAN clustering parameters
  eps: 0.15                            # Epsilon: maximum distance between samples to be neighbors
  min_pts: 8                       # min_pts: minimum traces in neighborhood to form cluster
  temporal_weight: 0.05                  # Weight for temporal vs spatial features (0-1, 0=spatial only)
  spatial_weight: 0.3                  # Weight for spatial coordinates in feature space (0-1)

# ==============================================================================
# DATA PATHS
# ==============================================================================
data:
  # File paths
  netcdf_path: "data/processed/mdim_Sant_Marti.nc"    # Input NetCDF file
  municipality: "Sant Martí"                               # Municipality to analyze
  output_dir: "outputs/Sant_Marti"              # Output directory

# ==============================================================================
# EXPORT SETTINGS
# ==============================================================================
export:
  # Export options for cluster data
  enable_json_export: true             # Enable JSON export of cluster data

# ============================================================================== 
# BASEMAP SETTINGS
# ==============================================================================
basemap:
  # Basemap layer to use for visualizations
  basemap_layer: "ortofoto_color_vigent"  
  # Options: ortofoto_color_vigent, ortofoto_gris_vigent, ortofoto_infraroig_vigent, ortofoto_color_[període], ortofoto_infraroig_[període]
  # Periods can be specified as needed, e.g., ortofoto_color_2023; For more information, see the GetCapabilities of the WMS service:https://geoserveis.icgc.cat/servei/catalunya/orto-territorial/wms?service=wms&version=1.3.0&request=GetCapabilities 

# ==============================================================================
# PERFORMANCE SETTINGS
# ==============================================================================
processing:
  # Performance parameters that may need adjustment for different datasets
  chunk_size: 1000                     # Processing chunk size for large datasets
  max_pixels_for_sampling: 50000       # Maximum pixels before sampling for efficiency

# Note: Additional configuration parameters (visualization, logging, export, etc.) 
# are available with defaults in config_loader.py and rarely need modification.

